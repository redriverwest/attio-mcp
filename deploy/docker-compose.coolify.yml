services:
  attio-mcp:
    build:
      context: ..
      dockerfile: deploy/Dockerfile
    image: attio-mcp:latest
    restart: unless-stopped
    environment:
      MCP_TRANSPORT: ${MCP_TRANSPORT:-sse}
      MCP_HOST: 0.0.0.0
      MCP_PORT: ${MCP_PORT:-8080}
      LOG_LEVEL: ${LOG_LEVEL:-INFO}
    expose:
      - "${MCP_PORT:-8080}"
    # These labels are specific to Coolify and are moved to docker-compose.coolify.yml
    # to keep the base compose file clean.
    labels:
      - "coolify.managed=true"
      - "coolify.name=attio-mcp"
      - "coolify.fqdn=${COOLIFY_FQDN:-attio.example.com}"
      - "coolify.port=${MCP_PORT:-8080}"
    networks:
      - coolify

networks:
  coolify:
    external: true
